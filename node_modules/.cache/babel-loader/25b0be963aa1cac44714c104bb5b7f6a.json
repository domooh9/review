{"ast":null,"code":"import _regeneratorRuntime from\"/home/dom/bookReview/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/dom/bookReview/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/dom/bookReview/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{useParams}from'react-router-dom';import Loading from\"../Loader/Loader\";import coverImg from\"../../images/cover_not_found.jpg\";import\"./BookDetails.css\";import{FaArrowLeft}from\"react-icons/fa\";import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var URL=\"https://openlibrary.org/works/\";var BookDetails=function BookDetails(){var _useParams=useParams(),id=_useParams.id;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),book=_useState4[0],setBook=_useState4[1];var navigate=useNavigate();useEffect(function(){setLoading(true);function getBookDetails(){return _getBookDetails.apply(this,arguments);}function _getBookDetails(){_getBookDetails=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data,description,title,covers,subject_places,subject_times,subjects,newBook;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"\".concat(URL).concat(id,\".json\"));case 3:response=_context.sent;_context.next=6;return response.json();case 6:data=_context.sent;console.log(data);if(data){description=data.description,title=data.title,covers=data.covers,subject_places=data.subject_places,subject_times=data.subject_times,subjects=data.subjects;newBook={description:description?description.value:\"No book found\",title:title,cover_img:covers?\"https://covers.openlibrary.org/b/id/\".concat(covers[0],\"-L.jpg\"):coverImg,subject_places:subject_places?subject_places.join(\", \"):\"No subject places found\",subject_times:subject_times?subject_times.join(\", \"):\"No subject times found\",subjects:subjects?subjects.join(\", \"):\"No subjects found\"};setBook(newBook);}else{setBook(null);}setLoading(false);_context.next=16;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);console.log(_context.t0);setLoading(false);case 16:case\"end\":return _context.stop();}}},_callee,null,[[0,12]]);}));return _getBookDetails.apply(this,arguments);}getBookDetails();},[id]);if(loading)return/*#__PURE__*/_jsx(Loading,{});return/*#__PURE__*/_jsx(\"section\",{className:\"book-details\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"flex flex-c back-btn\",onClick:function onClick(){return navigate(\"/book\");},children:[/*#__PURE__*/_jsx(FaArrowLeft,{size:22}),/*#__PURE__*/_jsx(\"span\",{className:\"fs-18 fw-6\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"book-details-content grid\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"book-details-img\",children:/*#__PURE__*/_jsx(\"img\",{src:book===null||book===void 0?void 0:book.cover_img,alt:\"cover img\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"book-details-info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"book-details-item title\",children:/*#__PURE__*/_jsx(\"span\",{className:\"fw-6 fs-24\",children:book===null||book===void 0?void 0:book.title})}),/*#__PURE__*/_jsx(\"div\",{className:\"book-details-item description\",children:/*#__PURE__*/_jsx(\"span\",{children:book===null||book===void 0?void 0:book.description})}),/*#__PURE__*/_jsxs(\"div\",{className:\"book-details-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"fw-6\",children:\"Subject Places: \"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-italic\",children:book===null||book===void 0?void 0:book.subject_places})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"book-details-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"fw-6\",children:\"Subject Times: \"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-italic\",children:book===null||book===void 0?void 0:book.subject_times})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"book-details-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"fw-6\",children:\"Subjects: \"}),/*#__PURE__*/_jsx(\"span\",{children:book===null||book===void 0?void 0:book.subjects})]})]})]})]})});};export default BookDetails;","map":{"version":3,"names":["React","useState","useEffect","useParams","Loading","coverImg","FaArrowLeft","useNavigate","URL","BookDetails","id","loading","setLoading","book","setBook","navigate","getBookDetails","fetch","response","json","data","console","log","description","title","covers","subject_places","subject_times","subjects","newBook","value","cover_img","join"],"sources":["/home/dom/bookReview/src/components/BookDetails/BookDetails.js"],"sourcesContent":["import React, {useState, useEffect} from 'react';\nimport { useParams } from 'react-router-dom';\nimport Loading from \"../Loader/Loader\";\nimport coverImg from \"../../images/cover_not_found.jpg\";\nimport \"./BookDetails.css\";\nimport {FaArrowLeft} from \"react-icons/fa\";\nimport { useNavigate } from 'react-router-dom';\n\nconst URL = \"https://openlibrary.org/works/\";\n\nconst BookDetails = () => {\n  const {id} = useParams();\n  const [loading, setLoading] = useState(false);\n  const [book, setBook] = useState(null);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    setLoading(true);\n    async function getBookDetails(){\n      try{\n        const response = await fetch(`${URL}${id}.json`);\n        const data = await response.json();\n        console.log(data);\n\n        if(data){\n          const {description, title, covers, subject_places, subject_times, subjects} = data;\n          const newBook = {\n            description: description ? description.value : \"No book found\",\n            title: title,\n            cover_img: covers ? `https://covers.openlibrary.org/b/id/${covers[0]}-L.jpg` : coverImg,\n            subject_places: subject_places ? subject_places.join(\", \") : \"No subject places found\",\n            subject_times : subject_times ? subject_times.join(\", \") : \"No subject times found\",\n            subjects: subjects ? subjects.join(\", \") : \"No subjects found\"\n          };\n          setBook(newBook);\n        } else {\n          setBook(null);\n        }\n        setLoading(false);\n      } catch(error){\n        console.log(error);\n        setLoading(false);\n      }\n    }\n    getBookDetails();\n  }, [id]);\n\n  if(loading) return <Loading />;\n\n  return (\n    <section className='book-details'>\n      <div className='container'>\n        <button type='button' className='flex flex-c back-btn' onClick={() => navigate(\"/book\")}>\n          <FaArrowLeft size = {22} />\n          <span className='fs-18 fw-6'></span>\n        </button>\n\n        <div className='book-details-content grid'>\n          <div className='book-details-img'>\n            <img src = {book?.cover_img} alt = \"cover img\" />\n          </div>\n          <div className='book-details-info'>\n            <div className='book-details-item title'>\n              <span className='fw-6 fs-24'>{book?.title}</span>\n            </div>\n            <div className='book-details-item description'>\n              <span>{book?.description}</span>\n            </div>\n            <div className='book-details-item'>\n              <span className='fw-6'>Subject Places: </span>\n              <span className='text-italic'>{book?.subject_places}</span>\n            </div>\n            <div className='book-details-item'>\n              <span className='fw-6'>Subject Times: </span>\n              <span className='text-italic'>{book?.subject_times}</span>\n            </div>\n            <div className='book-details-item'>\n              <span className='fw-6'>Subjects: </span>\n              <span>{book?.subjects}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </section>\n  )\n}\n\nexport default BookDetails"],"mappings":"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"},"metadata":{},"sourceType":"module"}